<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2487.3">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 15.0px Monaco; color: #848684; -webkit-text-stroke: #848684; background-color: #ffffff}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 15.0px Monaco; color: #53954a; -webkit-text-stroke: #53954a; background-color: #ffffff}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 15.0px Monaco; color: #262626; -webkit-text-stroke: #262626; background-color: #ffffff}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 15.0px Monaco; color: #06214f; -webkit-text-stroke: #06214f; background-color: #ffffff}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 16.0px Helvetica; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 16.0px Helvetica; -webkit-text-stroke: #000000; background-color: #ffffff; min-height: 19.0px}
    span.s1 {font-kerning: none}
    span.s2 {font-kerning: none; color: #262626; -webkit-text-stroke: 0px #262626}
    span.s3 {font-kerning: none; color: #53954a; -webkit-text-stroke: 0px #53954a}
    span.s4 {font-kerning: none; color: #5b28b4; -webkit-text-stroke: 0px #5b28b4}
    span.s5 {font-kerning: none; color: #06214f; -webkit-text-stroke: 0px #06214f}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE html&gt;</span></p>
<p class="p2"><span class="s2">&lt;</span><span class="s1">html</span><span class="s2">&gt;</span></p>
<p class="p2"><span class="s2">&lt;</span><span class="s1">head</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">    </span>&lt;</span><span class="s3">title</span><span class="s1">&gt;Hello WebSocket&lt;/</span><span class="s3">title</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">    </span>&lt;</span><span class="s3">link</span><span class="s2"> </span><span class="s4">rel</span><span class="s2">=</span><span class="s1">"stylesheet"</span><span class="s2"> </span><span class="s4">href</span><span class="s2">=</span><span class="s1">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"</span><span class="s2"> </span><span class="s4">integrity</span><span class="s2">=</span><span class="s1">"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"</span><span class="s2"> </span><span class="s4">crossorigin</span><span class="s2">=</span><span class="s1">"anonymous"</span><span class="s2">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">    </span>&lt;</span><span class="s3">link</span><span class="s2"> </span><span class="s4">href</span><span class="s2">=</span><span class="s1">"/main.css"</span><span class="s2"> </span><span class="s4">rel</span><span class="s2">=</span><span class="s1">"stylesheet"</span><span class="s2">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">    </span>&lt;</span><span class="s3">script</span><span class="s2"> </span><span class="s4">src</span><span class="s2">=</span><span class="s1">"https://code.jquery.com/jquery-3.1.1.min.js"</span><span class="s2">&gt;&lt;/</span><span class="s3">script</span><span class="s2">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">    </span>&lt;</span><span class="s3">script</span><span class="s2"> </span><span class="s4">src</span><span class="s2">=</span><span class="s1">"https://cdn.jsdelivr.net/npm/@stomp/stompjs@7.0.0/bundles/stomp.umd.min.js"</span><span class="s2">&gt;&lt;/</span><span class="s3">script</span><span class="s2">&gt;</span></p>
<p class="p2"><span class="s2"><span class="Apple-converted-space">    </span>&lt;</span><span class="s1">script</span><span class="s2"> </span><span class="s4">src</span><span class="s2">=</span><span class="s5">"/app.js"</span><span class="s2">&gt;&lt;/</span><span class="s1">script</span><span class="s2">&gt;</span></p>
<p class="p2"><span class="s2">&lt;/</span><span class="s1">head</span><span class="s2">&gt;</span></p>
<p class="p2"><span class="s2">&lt;</span><span class="s1">body</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s1">&lt;</span><span class="s3">noscript</span><span class="s1">&gt;&lt;</span><span class="s3">h2</span><span class="s1"> </span><span class="s4">style</span><span class="s1">=</span><span class="s5">"color: #ff0000"</span><span class="s1">&gt;Seems your browser doesn't support Javascript! Websocket relies on Javascript being</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">    </span>enabled. Please enable</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">    </span>Javascript and reload this page!&lt;/</span><span class="s3">h2</span><span class="s1">&gt;&lt;/</span><span class="s3">noscript</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2">&lt;</span><span class="s3">div</span><span class="s2"> </span><span class="s4">id</span><span class="s2">=</span><span class="s1">"main-content"</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s1">"container"</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">    </span>&lt;</span><span class="s3">div</span><span class="s1"> </span><span class="s4">class</span><span class="s1">=</span><span class="s5">"row"</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">        </span>&lt;</span><span class="s3">div</span><span class="s1"> </span><span class="s4">class</span><span class="s1">=</span><span class="s5">"col-md-6"</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s3">form</span><span class="s1"> </span><span class="s4">class</span><span class="s1">=</span><span class="s5">"form-inline"</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">                </span>&lt;</span><span class="s3">div</span><span class="s1"> </span><span class="s4">class</span><span class="s1">=</span><span class="s5">"form-group"</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;</span><span class="s3">label</span><span class="s1"> </span><span class="s4">for</span><span class="s1">=</span><span class="s5">"connect"</span><span class="s1">&gt;WebSocket connection:&lt;/</span><span class="s3">label</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;</span><span class="s3">button</span><span class="s1"> </span><span class="s4">id</span><span class="s1">=</span><span class="s5">"connect"</span><span class="s1"> </span><span class="s4">class</span><span class="s1">=</span><span class="s5">"btn btn-default"</span><span class="s1"> </span><span class="s4">type</span><span class="s1">=</span><span class="s5">"submit"</span><span class="s1">&gt;Connect&lt;/</span><span class="s3">button</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;</span><span class="s3">button</span><span class="s2"> </span><span class="s4">id</span><span class="s2">=</span><span class="s1">"disconnect"</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s1">"btn btn-default"</span><span class="s2"> </span><span class="s4">type</span><span class="s2">=</span><span class="s1">"submit"</span><span class="s2"> </span><span class="s4">disabled</span><span class="s2">=</span><span class="s1">"disabled"</span><span class="s2">&gt;Disconnect</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/</span><span class="s3">button</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/</span><span class="s3">div</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/</span><span class="s3">form</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/</span><span class="s3">div</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">        </span>&lt;</span><span class="s3">div</span><span class="s1"> </span><span class="s4">class</span><span class="s1">=</span><span class="s5">"col-md-6"</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">            </span>&lt;</span><span class="s3">form</span><span class="s1"> </span><span class="s4">class</span><span class="s1">=</span><span class="s5">"form-inline"</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">                </span>&lt;</span><span class="s3">div</span><span class="s1"> </span><span class="s4">class</span><span class="s1">=</span><span class="s5">"form-group"</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;</span><span class="s3">label</span><span class="s1"> </span><span class="s4">for</span><span class="s1">=</span><span class="s5">"name"</span><span class="s1">&gt;What is your name?&lt;/</span><span class="s3">label</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;</span><span class="s3">input</span><span class="s2"> </span><span class="s4">type</span><span class="s2">=</span><span class="s1">"text"</span><span class="s2"> </span><span class="s4">id</span><span class="s2">=</span><span class="s1">"name"</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s1">"form-control"</span><span class="s2"> </span><span class="s4">placeholder</span><span class="s2">=</span><span class="s1">"Your name here..."</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/</span><span class="s3">div</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">                </span>&lt;</span><span class="s3">button</span><span class="s1"> </span><span class="s4">id</span><span class="s1">=</span><span class="s5">"send"</span><span class="s1"> </span><span class="s4">class</span><span class="s1">=</span><span class="s5">"btn btn-default"</span><span class="s1"> </span><span class="s4">type</span><span class="s1">=</span><span class="s5">"submit"</span><span class="s1">&gt;Send&lt;/</span><span class="s3">button</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/</span><span class="s3">form</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/</span><span class="s3">div</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/</span><span class="s3">div</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">    </span>&lt;</span><span class="s3">div</span><span class="s1"> </span><span class="s4">class</span><span class="s1">=</span><span class="s5">"row"</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">        </span>&lt;</span><span class="s3">div</span><span class="s1"> </span><span class="s4">class</span><span class="s1">=</span><span class="s5">"col-md-12"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span>&lt;</span><span class="s3">table</span><span class="s2"> </span><span class="s4">id</span><span class="s2">=</span><span class="s1">"conversation"</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s1">"table table-striped"</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">                </span>&lt;</span><span class="s3">thead</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">                </span>&lt;</span><span class="s3">tr</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;</span><span class="s3">th</span><span class="s1">&gt;Greetings&lt;/</span><span class="s3">th</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/</span><span class="s3">tr</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/</span><span class="s3">thead</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">                </span>&lt;</span><span class="s3">tbody</span><span class="s1"> </span><span class="s4">id</span><span class="s1">=</span><span class="s5">"greetings"</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/</span><span class="s3">tbody</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/</span><span class="s3">table</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/</span><span class="s3">div</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/</span><span class="s3">div</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s1">&lt;/</span><span class="s3">div</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s2">&lt;/</span><span class="s1">body</span><span class="s2">&gt;</span></p>
<p class="p3"><span class="s1">&lt;script&gt;</span></p>
<p class="p5"><span class="s1">const stompClient = new StompJs.Client({</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>brokerURL: 'ws://localhost:8080/gs-guide-websocket'</span></p>
<p class="p5"><span class="s1">});</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">stompClient.onConnect = (frame) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>setConnected(true);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>console.log('Connected: ' + frame);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>stompClient.subscribe('/topic/greetings', (greeting) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>showGreeting(JSON.parse(greeting.body).content);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>});</span></p>
<p class="p5"><span class="s1">};</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">stompClient.onWebSocketError = (error) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>console.error('Error with websocket', error);</span></p>
<p class="p5"><span class="s1">};</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">stompClient.onStompError = (frame) =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>console.error('Broker reported error: ' + frame.headers['message']);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>console.error('Additional details: ' + frame.body);</span></p>
<p class="p5"><span class="s1">};</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">function setConnected(connected) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>$("#connect").prop("disabled", connected);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>$("#disconnect").prop("disabled", !connected);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>if (connected) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>$("#conversation").show();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>else {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>$("#conversation").hide();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>$("#greetings").html("");</span></p>
<p class="p5"><span class="s1">}</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">function connect() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>stompClient.activate();</span></p>
<p class="p5"><span class="s1">}</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">function disconnect() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>stompClient.deactivate();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>setConnected(false);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>console.log("Disconnected");</span></p>
<p class="p5"><span class="s1">}</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">function sendName() {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>stompClient.publish({</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>destination: "/app/hello",</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>body: JSON.stringify({'name': $("#name").val()})</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>});</span></p>
<p class="p5"><span class="s1">}</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">function showGreeting(message) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>$("#greetings").append("&lt;tr&gt;&lt;td&gt;" + message + "&lt;/td&gt;&lt;/tr&gt;");</span></p>
<p class="p5"><span class="s1">}</span></p>
<p class="p6"><span class="s1"></span><br></p>
<p class="p5"><span class="s1">$(function () {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>$("form").on('submit', (e) =&gt; e.preventDefault());</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>$( "#connect" ).click(() =&gt; connect());</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>$( "#disconnect" ).click(() =&gt; disconnect());</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span>$( "#send" ).click(() =&gt; sendName());</span></p>
<p class="p5"><span class="s1">});</span></p>
<p class="p3"><span class="s1">&lt;/script&gt;</span></p>
<p class="p2"><span class="s2">&lt;/</span><span class="s1">html</span><span class="s2">&gt;</span></p>
</body>
</html>
